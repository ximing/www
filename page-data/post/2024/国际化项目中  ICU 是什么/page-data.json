{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/post/2024/国际化项目中  ICU 是什么/","result":{"data":{"site":{"siteMetadata":{"title":"一席之地","author":"xi ming"}},"markdownRemark":{"id":"f62fe0ca-56cc-5489-9d4e-83ad9b7a1128","excerpt":"在 国际化（i18n）和本地化（l10n） 开发中，ICU（International Components for Unicode） 是一个由 Unicode 联盟维护的开源库，提供了一套强大的工具来处理多语言文本、日期时间、数字格式化、复数规则、性别敏感文本等国际化需求。ICU 是许多操作系统（如 Android…","html":"<p>在 <em>国际化（i18n）和本地化（l10n）</em> 开发中，<strong>ICU（International Components for Unicode）</strong> 是一个由 Unicode 联盟维护的开源库，提供了一套强大的工具来处理多语言文本、日期时间、数字格式化、复数规则、性别敏感文本等国际化需求。ICU 是许多操作系统（如 Android、iOS、Linux）和编程语言（如 Java、C/C++、Python）的底层国际化支持库。</p>\n<h2 id=\"icu-的核心功能\" style=\"position:relative;\"><strong>ICU 的核心功能</strong><a href=\"#icu-%E7%9A%84%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD\" aria-label=\"icu 的核心功能 permalink\" class=\"custom-class after\"><svg t=\"1685947446267\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4780\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"25\" height=\"25\"><path d=\"M282.453333 676.693333m-181.333333 0a181.333333 181.333333 0 1 0 362.666667 0 181.333333 181.333333 0 1 0-362.666667 0Z\" fill=\"#FFCA5F\" p-id=\"4781\"></path><path d=\"M570.453333 111.36m-42.666666 0a42.666667 42.666667 0 1 0 85.333333 0 42.666667 42.666667 0 1 0-85.333333 0Z\" fill=\"#FFCA5F\" p-id=\"4782\"></path><path d=\"M388.053333 866.346667A208 208 0 0 1 241.066667 512l106.666666-106.666667 45.226667 45.226667-106.666667 106.666667A144 144 0 1 0 490.666667 760.32l107.733333-106.666667 45.226667 45.226667-107.733334 106.666667a207.146667 207.146667 0 0 1-147.84 60.8zM723.413333 617.173333l-45.226666-45.226666 100.906666-100.906667A144 144 0 1 0 576 267.52l-100.906667 100.906667-45.226666-45.44 100.906666-100.906667A208 208 0 0 1 824.32 516.266667z\" fill=\"#5C1CF7\" p-id=\"4783\"></path><path d=\"M442.794667 558.506667l134.570666-134.549334 45.248 45.269334-134.549333 134.549333z\" fill=\"#5C1CF7\" p-id=\"4784\"></path></svg></a></h2>\n<p>ICU 的主要功能包括：</p>\n<h3 id=\"1-文本格式化与解析\" style=\"position:relative;\"><strong>1. 文本格式化与解析</strong><a href=\"#1-%E6%96%87%E6%9C%AC%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%B8%8E%E8%A7%A3%E6%9E%90\" aria-label=\"1 文本格式化与解析 permalink\" class=\"custom-class after\"><svg t=\"1685947446267\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4780\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"25\" height=\"25\"><path d=\"M282.453333 676.693333m-181.333333 0a181.333333 181.333333 0 1 0 362.666667 0 181.333333 181.333333 0 1 0-362.666667 0Z\" fill=\"#FFCA5F\" p-id=\"4781\"></path><path d=\"M570.453333 111.36m-42.666666 0a42.666667 42.666667 0 1 0 85.333333 0 42.666667 42.666667 0 1 0-85.333333 0Z\" fill=\"#FFCA5F\" p-id=\"4782\"></path><path d=\"M388.053333 866.346667A208 208 0 0 1 241.066667 512l106.666666-106.666667 45.226667 45.226667-106.666667 106.666667A144 144 0 1 0 490.666667 760.32l107.733333-106.666667 45.226667 45.226667-107.733334 106.666667a207.146667 207.146667 0 0 1-147.84 60.8zM723.413333 617.173333l-45.226666-45.226666 100.906666-100.906667A144 144 0 1 0 576 267.52l-100.906667 100.906667-45.226666-45.44 100.906666-100.906667A208 208 0 0 1 824.32 516.266667z\" fill=\"#5C1CF7\" p-id=\"4783\"></path><path d=\"M442.794667 558.506667l134.570666-134.549334 45.248 45.269334-134.549333 134.549333z\" fill=\"#5C1CF7\" p-id=\"4784\"></path></svg></a></h3>\n<ul>\n<li><strong>数字格式化</strong>（货币、百分比、科学计数法等）</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\">    <span class=\"token comment\">// 示例：格式化货币（美元）</span>\n    <span class=\"token class-name\">NumberFormat</span><span class=\"token punctuation\">.</span><span class=\"token function\">getCurrencyInstance</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Locale</span><span class=\"token punctuation\">.</span><span class=\"token constant\">US</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token number\">1234.56</span><span class=\"token punctuation\">)</span> → <span class=\"token string\">\"$1,234.56\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<ul>\n<li><strong>日期时间格式化</strong>（支持不同历法，如公历、农历、伊斯兰历等）</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token comment\">// 示例：格式化日期（法语）</span>\n    <span class=\"token class-name\">SimpleDateFormat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"EEEE, d MMMM y\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Locale</span><span class=\"token punctuation\">.</span><span class=\"token constant\">FRANCE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> → <span class=\"token string\">\"lundi, 19 mai 2025\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"2-字符串比较与排序排序规则\" style=\"position:relative;\"><strong>2. 字符串比较与排序（排序规则）</strong><a href=\"#2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83%E4%B8%8E%E6%8E%92%E5%BA%8F%E6%8E%92%E5%BA%8F%E8%A7%84%E5%88%99\" aria-label=\"2 字符串比较与排序排序规则 permalink\" class=\"custom-class after\"><svg t=\"1685947446267\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4780\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"25\" height=\"25\"><path d=\"M282.453333 676.693333m-181.333333 0a181.333333 181.333333 0 1 0 362.666667 0 181.333333 181.333333 0 1 0-362.666667 0Z\" fill=\"#FFCA5F\" p-id=\"4781\"></path><path d=\"M570.453333 111.36m-42.666666 0a42.666667 42.666667 0 1 0 85.333333 0 42.666667 42.666667 0 1 0-85.333333 0Z\" fill=\"#FFCA5F\" p-id=\"4782\"></path><path d=\"M388.053333 866.346667A208 208 0 0 1 241.066667 512l106.666666-106.666667 45.226667 45.226667-106.666667 106.666667A144 144 0 1 0 490.666667 760.32l107.733333-106.666667 45.226667 45.226667-107.733334 106.666667a207.146667 207.146667 0 0 1-147.84 60.8zM723.413333 617.173333l-45.226666-45.226666 100.906666-100.906667A144 144 0 1 0 576 267.52l-100.906667 100.906667-45.226666-45.44 100.906666-100.906667A208 208 0 0 1 824.32 516.266667z\" fill=\"#5C1CF7\" p-id=\"4783\"></path><path d=\"M442.794667 558.506667l134.570666-134.549334 45.248 45.269334-134.549333 134.549333z\" fill=\"#5C1CF7\" p-id=\"4784\"></path></svg></a></h3>\n<ul>\n<li><strong>支持语言敏感的字符串排序</strong>（如德语 <code class=\"language-text\">ä</code> 排序规则不同于英语 <code class=\"language-text\">a</code>）。</li>\n<li><strong>Unicode 规范化（Normalization）</strong>，处理变音符号（如 <code class=\"language-text\">é</code> vs. <code class=\"language-text\">é</code>）。</li>\n</ul>\n<h3 id=\"3-字符编码转换\" style=\"position:relative;\"><strong>3. 字符编码转换</strong><a href=\"#3-%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E8%BD%AC%E6%8D%A2\" aria-label=\"3 字符编码转换 permalink\" class=\"custom-class after\"><svg t=\"1685947446267\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4780\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"25\" height=\"25\"><path d=\"M282.453333 676.693333m-181.333333 0a181.333333 181.333333 0 1 0 362.666667 0 181.333333 181.333333 0 1 0-362.666667 0Z\" fill=\"#FFCA5F\" p-id=\"4781\"></path><path d=\"M570.453333 111.36m-42.666666 0a42.666667 42.666667 0 1 0 85.333333 0 42.666667 42.666667 0 1 0-85.333333 0Z\" fill=\"#FFCA5F\" p-id=\"4782\"></path><path d=\"M388.053333 866.346667A208 208 0 0 1 241.066667 512l106.666666-106.666667 45.226667 45.226667-106.666667 106.666667A144 144 0 1 0 490.666667 760.32l107.733333-106.666667 45.226667 45.226667-107.733334 106.666667a207.146667 207.146667 0 0 1-147.84 60.8zM723.413333 617.173333l-45.226666-45.226666 100.906666-100.906667A144 144 0 1 0 576 267.52l-100.906667 100.906667-45.226666-45.44 100.906666-100.906667A208 208 0 0 1 824.32 516.266667z\" fill=\"#5C1CF7\" p-id=\"4783\"></path><path d=\"M442.794667 558.506667l134.570666-134.549334 45.248 45.269334-134.549333 134.549333z\" fill=\"#5C1CF7\" p-id=\"4784\"></path></svg></a></h3>\n<ul>\n<li>支持 UTF-8、UTF-16、GB2312 等多种编码转换，确保文本在不同编码环境下的正确显示。</li>\n</ul>\n<h3 id=\"4-复数规则plural-rules\" style=\"position:relative;\"><strong>4. 复数规则（Plural Rules）</strong><a href=\"#4-%E5%A4%8D%E6%95%B0%E8%A7%84%E5%88%99plural-rules\" aria-label=\"4 复数规则plural rules permalink\" class=\"custom-class after\"><svg t=\"1685947446267\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4780\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"25\" height=\"25\"><path d=\"M282.453333 676.693333m-181.333333 0a181.333333 181.333333 0 1 0 362.666667 0 181.333333 181.333333 0 1 0-362.666667 0Z\" fill=\"#FFCA5F\" p-id=\"4781\"></path><path d=\"M570.453333 111.36m-42.666666 0a42.666667 42.666667 0 1 0 85.333333 0 42.666667 42.666667 0 1 0-85.333333 0Z\" fill=\"#FFCA5F\" p-id=\"4782\"></path><path d=\"M388.053333 866.346667A208 208 0 0 1 241.066667 512l106.666666-106.666667 45.226667 45.226667-106.666667 106.666667A144 144 0 1 0 490.666667 760.32l107.733333-106.666667 45.226667 45.226667-107.733334 106.666667a207.146667 207.146667 0 0 1-147.84 60.8zM723.413333 617.173333l-45.226666-45.226666 100.906666-100.906667A144 144 0 1 0 576 267.52l-100.906667 100.906667-45.226666-45.44 100.906666-100.906667A208 208 0 0 1 824.32 516.266667z\" fill=\"#5C1CF7\" p-id=\"4783\"></path><path d=\"M442.794667 558.506667l134.570666-134.549334 45.248 45.269334-134.549333 134.549333z\" fill=\"#5C1CF7\" p-id=\"4784\"></path></svg></a></h3>\n<ul>\n<li>不同语言的复数形式不同（如英语 <code class=\"language-text\">1 book</code> vs. <code class=\"language-text\">2 books</code>，俄语有更复杂的规则）。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token comment\">// 示例：俄语复数规则</span>\n<span class=\"token string\">\"You have {count, plural, one {# книга} few {# книги} many {# книг}}\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"5-性别敏感文本gender-aware-formatting\" style=\"position:relative;\"><strong>5. 性别敏感文本（Gender-aware Formatting）</strong><a href=\"#5-%E6%80%A7%E5%88%AB%E6%95%8F%E6%84%9F%E6%96%87%E6%9C%ACgender-aware-formatting\" aria-label=\"5 性别敏感文本gender aware formatting permalink\" class=\"custom-class after\"><svg t=\"1685947446267\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4780\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"25\" height=\"25\"><path d=\"M282.453333 676.693333m-181.333333 0a181.333333 181.333333 0 1 0 362.666667 0 181.333333 181.333333 0 1 0-362.666667 0Z\" fill=\"#FFCA5F\" p-id=\"4781\"></path><path d=\"M570.453333 111.36m-42.666666 0a42.666667 42.666667 0 1 0 85.333333 0 42.666667 42.666667 0 1 0-85.333333 0Z\" fill=\"#FFCA5F\" p-id=\"4782\"></path><path d=\"M388.053333 866.346667A208 208 0 0 1 241.066667 512l106.666666-106.666667 45.226667 45.226667-106.666667 106.666667A144 144 0 1 0 490.666667 760.32l107.733333-106.666667 45.226667 45.226667-107.733334 106.666667a207.146667 207.146667 0 0 1-147.84 60.8zM723.413333 617.173333l-45.226666-45.226666 100.906666-100.906667A144 144 0 1 0 576 267.52l-100.906667 100.906667-45.226666-45.44 100.906666-100.906667A208 208 0 0 1 824.32 516.266667z\" fill=\"#5C1CF7\" p-id=\"4783\"></path><path d=\"M442.794667 558.506667l134.570666-134.549334 45.248 45.269334-134.549333 134.549333z\" fill=\"#5C1CF7\" p-id=\"4784\"></path></svg></a></h3>\n<ul>\n<li>某些语言（如法语、阿拉伯语）的文本会根据性别变化。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\">    <span class=\"token comment\">// 示例：法语（\"Vous êtes connecté(e)\"）</span>\n    <span class=\"token class-name\">MessageFormat</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Vous êtes connecté{0}\"</span><span class=\"token punctuation\">,</span> gender <span class=\"token operator\">==</span> <span class=\"token constant\">FEMALE</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"(e)\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"6-断行line-breaking和文本边界检测\" style=\"position:relative;\"><strong>6. 断行（Line Breaking）和文本边界检测</strong><a href=\"#6-%E6%96%AD%E8%A1%8Cline-breaking%E5%92%8C%E6%96%87%E6%9C%AC%E8%BE%B9%E7%95%8C%E6%A3%80%E6%B5%8B\" aria-label=\"6 断行line breaking和文本边界检测 permalink\" class=\"custom-class after\"><svg t=\"1685947446267\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4780\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"25\" height=\"25\"><path d=\"M282.453333 676.693333m-181.333333 0a181.333333 181.333333 0 1 0 362.666667 0 181.333333 181.333333 0 1 0-362.666667 0Z\" fill=\"#FFCA5F\" p-id=\"4781\"></path><path d=\"M570.453333 111.36m-42.666666 0a42.666667 42.666667 0 1 0 85.333333 0 42.666667 42.666667 0 1 0-85.333333 0Z\" fill=\"#FFCA5F\" p-id=\"4782\"></path><path d=\"M388.053333 866.346667A208 208 0 0 1 241.066667 512l106.666666-106.666667 45.226667 45.226667-106.666667 106.666667A144 144 0 1 0 490.666667 760.32l107.733333-106.666667 45.226667 45.226667-107.733334 106.666667a207.146667 207.146667 0 0 1-147.84 60.8zM723.413333 617.173333l-45.226666-45.226666 100.906666-100.906667A144 144 0 1 0 576 267.52l-100.906667 100.906667-45.226666-45.44 100.906666-100.906667A208 208 0 0 1 824.32 516.266667z\" fill=\"#5C1CF7\" p-id=\"4783\"></path><path d=\"M442.794667 558.506667l134.570666-134.549334 45.248 45.269334-134.549333 134.549333z\" fill=\"#5C1CF7\" p-id=\"4784\"></path></svg></a></h3>\n<ul>\n<li>支持中文、日文等无空格语言的分词（Word Break）</li>\n<li>换行规则（如 CJK 文本的换行策略）</li>\n</ul>\n<h3 id=\"7-时区和国际化日历\" style=\"position:relative;\"><strong>7. 时区和国际化日历</strong><a href=\"#7-%E6%97%B6%E5%8C%BA%E5%92%8C%E5%9B%BD%E9%99%85%E5%8C%96%E6%97%A5%E5%8E%86\" aria-label=\"7 时区和国际化日历 permalink\" class=\"custom-class after\"><svg t=\"1685947446267\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4780\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"25\" height=\"25\"><path d=\"M282.453333 676.693333m-181.333333 0a181.333333 181.333333 0 1 0 362.666667 0 181.333333 181.333333 0 1 0-362.666667 0Z\" fill=\"#FFCA5F\" p-id=\"4781\"></path><path d=\"M570.453333 111.36m-42.666666 0a42.666667 42.666667 0 1 0 85.333333 0 42.666667 42.666667 0 1 0-85.333333 0Z\" fill=\"#FFCA5F\" p-id=\"4782\"></path><path d=\"M388.053333 866.346667A208 208 0 0 1 241.066667 512l106.666666-106.666667 45.226667 45.226667-106.666667 106.666667A144 144 0 1 0 490.666667 760.32l107.733333-106.666667 45.226667 45.226667-107.733334 106.666667a207.146667 207.146667 0 0 1-147.84 60.8zM723.413333 617.173333l-45.226666-45.226666 100.906666-100.906667A144 144 0 1 0 576 267.52l-100.906667 100.906667-45.226666-45.44 100.906666-100.906667A208 208 0 0 1 824.32 516.266667z\" fill=\"#5C1CF7\" p-id=\"4783\"></path><path d=\"M442.794667 558.506667l134.570666-134.549334 45.248 45.269334-134.549333 134.549333z\" fill=\"#5C1CF7\" p-id=\"4784\"></path></svg></a></h3>\n<ul>\n<li>支持全球时区转换（如 <code class=\"language-text\">America/New_York</code> vs. <code class=\"language-text\">Asia/Shanghai</code>）。</li>\n<li>非公历日历（如希伯来历、伊斯兰历）的日期计算。</li>\n</ul>\n<h2 id=\"前端web的-icu-实现\" style=\"position:relative;\"><strong>前端（Web）的 ICU 实现</strong><a href=\"#%E5%89%8D%E7%AB%AFweb%E7%9A%84-icu-%E5%AE%9E%E7%8E%B0\" aria-label=\"前端web的 icu 实现 permalink\" class=\"custom-class after\"><svg t=\"1685947446267\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4780\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"25\" height=\"25\"><path d=\"M282.453333 676.693333m-181.333333 0a181.333333 181.333333 0 1 0 362.666667 0 181.333333 181.333333 0 1 0-362.666667 0Z\" fill=\"#FFCA5F\" p-id=\"4781\"></path><path d=\"M570.453333 111.36m-42.666666 0a42.666667 42.666667 0 1 0 85.333333 0 42.666667 42.666667 0 1 0-85.333333 0Z\" fill=\"#FFCA5F\" p-id=\"4782\"></path><path d=\"M388.053333 866.346667A208 208 0 0 1 241.066667 512l106.666666-106.666667 45.226667 45.226667-106.666667 106.666667A144 144 0 1 0 490.666667 760.32l107.733333-106.666667 45.226667 45.226667-107.733334 106.666667a207.146667 207.146667 0 0 1-147.84 60.8zM723.413333 617.173333l-45.226666-45.226666 100.906666-100.906667A144 144 0 1 0 576 267.52l-100.906667 100.906667-45.226666-45.44 100.906666-100.906667A208 208 0 0 1 824.32 516.266667z\" fill=\"#5C1CF7\" p-id=\"4783\"></path><path d=\"M442.794667 558.506667l134.570666-134.549334 45.248 45.269334-134.549333 134.549333z\" fill=\"#5C1CF7\" p-id=\"4784\"></path></svg></a></h2>\n<h3 id=\"-i18next--插件\" style=\"position:relative;\">** i18next + 插件**<a href=\"#-i18next--%E6%8F%92%E4%BB%B6\" aria-label=\" i18next  插件 permalink\" class=\"custom-class after\"><svg t=\"1685947446267\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4780\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"25\" height=\"25\"><path d=\"M282.453333 676.693333m-181.333333 0a181.333333 181.333333 0 1 0 362.666667 0 181.333333 181.333333 0 1 0-362.666667 0Z\" fill=\"#FFCA5F\" p-id=\"4781\"></path><path d=\"M570.453333 111.36m-42.666666 0a42.666667 42.666667 0 1 0 85.333333 0 42.666667 42.666667 0 1 0-85.333333 0Z\" fill=\"#FFCA5F\" p-id=\"4782\"></path><path d=\"M388.053333 866.346667A208 208 0 0 1 241.066667 512l106.666666-106.666667 45.226667 45.226667-106.666667 106.666667A144 144 0 1 0 490.666667 760.32l107.733333-106.666667 45.226667 45.226667-107.733334 106.666667a207.146667 207.146667 0 0 1-147.84 60.8zM723.413333 617.173333l-45.226666-45.226666 100.906666-100.906667A144 144 0 1 0 576 267.52l-100.906667 100.906667-45.226666-45.44 100.906666-100.906667A208 208 0 0 1 824.32 516.266667z\" fill=\"#5C1CF7\" p-id=\"4783\"></path><path d=\"M442.794667 558.506667l134.570666-134.549334 45.248 45.269334-134.549333 134.549333z\" fill=\"#5C1CF7\" p-id=\"4784\"></path></svg></a></h3>\n<ul>\n<li><strong>GitHub</strong>: <a href=\"https://github.com/i18next/i18next\">i18next</a>  <a href=\"https://www.i18next.com/overview/plugins-and-utils#i18n-formats\">Plugin</a></li>\n<li><strong>特点</strong>：\n<ul>\n<li>支持 ICU 消息格式（<code class=\"language-text\">{count, plural, one {...} other {...}}</code>）。</li>\n<li>与 React/Vue/Angular 深度集成（<code class=\"language-text\">react-i18next</code>）。</li>\n<li>扩展性强，支持后端动态加载翻译文件。</li>\n</ul>\n</li>\n<li><strong>示例（React + ICU 复数规则）</strong>：</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> i18next <span class=\"token keyword\">from</span> <span class=\"token string\">'i18next'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token constant\">ICU</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'i18next-icu'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ICU 语言规则（可选，默认已内置常见语言）</span>\n<span class=\"token keyword\">import</span> en <span class=\"token keyword\">from</span> <span class=\"token string\">'i18next-icu/locale-data/en'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> zh <span class=\"token keyword\">from</span> <span class=\"token string\">'i18next-icu/locale-data/zh'</span><span class=\"token punctuation\">;</span>\n\ni18next\n  <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ICU</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">localeData</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>en<span class=\"token punctuation\">,</span> zh<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 加载 ICU 插件</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">lng</span><span class=\"token operator\">:</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认语言</span>\n    <span class=\"token literal-property property\">resources</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">en</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">translation</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">// ICU 格式的翻译键值</span>\n          <span class=\"token literal-property property\">greeting</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Hello, {name}!\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">items</span><span class=\"token operator\">:</span> <span class=\"token string\">\"{count, plural, one {# item} other {# items}}\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Today is {date, date, short}\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">gender</span><span class=\"token operator\">:</span> <span class=\"token string\">\"{gender, select, male {He} female {She} other {They}} likes this.\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">zh</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">translation</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">greeting</span><span class=\"token operator\">:</span> <span class=\"token string\">\"你好，{name}！\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">items</span><span class=\"token operator\">:</span> <span class=\"token string\">\"{count, plural, other {# 个物品}}\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token string\">\"今天是 {date, date, short}\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">gender</span><span class=\"token operator\">:</span> <span class=\"token string\">\"{gender, select, male {他} female {她} other {他们}}喜欢这个。\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n### <span class=\"token operator\">**</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> 复数规则（Pluralization）<span class=\"token operator\">**</span>\n<span class=\"token comment\">// 英文：根据 count 返回不同复数形式</span>\n<span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'items'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"1 item\"</span>\n<span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'items'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"5 items\"</span>\n<span class=\"token comment\">// 中文：中文复数通常只有一种形式</span>\n<span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'items'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"5 个物品\"</span>\n\n### <span class=\"token operator\">**</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> 性别敏感文本（Gender）<span class=\"token operator\">**</span>\n\n<span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gender'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">gender</span><span class=\"token operator\">:</span> <span class=\"token string\">'male'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// \"He likes this.\" / \"他喜欢这个。\"</span>\n<span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gender'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">gender</span><span class=\"token operator\">:</span> <span class=\"token string\">'female'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"She likes this.\" / \"她喜欢这个。\"</span>\n\n### <span class=\"token operator\">**</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> 日期<span class=\"token operator\">/</span>时间格式化<span class=\"token operator\">**</span>\n\n<span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'date'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token comment\">// 英文： \"Today is 5/20/2025\"</span>\n<span class=\"token comment\">// 中文： \"今天是 2025/5/20\"</span>\n\n### <span class=\"token operator\">**</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span> 数字格式化（货币、百分比等）<span class=\"token operator\">**</span>\n\n<span class=\"token comment\">// 需要在翻译键值中定义格式</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">price</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Price: {value, number, ::currency/USD}\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'price'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">1234.56</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"Price: $1,234.56\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"与普通-i18next-的区别\" style=\"position:relative;\"><strong>与普通 i18next 的区别</strong><a href=\"#%E4%B8%8E%E6%99%AE%E9%80%9A-i18next-%E7%9A%84%E5%8C%BA%E5%88%AB\" aria-label=\"与普通 i18next 的区别 permalink\" class=\"custom-class after\"><svg t=\"1685947446267\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4780\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"25\" height=\"25\"><path d=\"M282.453333 676.693333m-181.333333 0a181.333333 181.333333 0 1 0 362.666667 0 181.333333 181.333333 0 1 0-362.666667 0Z\" fill=\"#FFCA5F\" p-id=\"4781\"></path><path d=\"M570.453333 111.36m-42.666666 0a42.666667 42.666667 0 1 0 85.333333 0 42.666667 42.666667 0 1 0-85.333333 0Z\" fill=\"#FFCA5F\" p-id=\"4782\"></path><path d=\"M388.053333 866.346667A208 208 0 0 1 241.066667 512l106.666666-106.666667 45.226667 45.226667-106.666667 106.666667A144 144 0 1 0 490.666667 760.32l107.733333-106.666667 45.226667 45.226667-107.733334 106.666667a207.146667 207.146667 0 0 1-147.84 60.8zM723.413333 617.173333l-45.226666-45.226666 100.906666-100.906667A144 144 0 1 0 576 267.52l-100.906667 100.906667-45.226666-45.44 100.906666-100.906667A208 208 0 0 1 824.32 516.266667z\" fill=\"#5C1CF7\" p-id=\"4783\"></path><path d=\"M442.794667 558.506667l134.570666-134.549334 45.248 45.269334-134.549333 134.549333z\" fill=\"#5C1CF7\" p-id=\"4784\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>普通 i18next</th>\n<th>i18next + ICU</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>复数规则</strong></td>\n<td>仅基础（<code class=\"language-text\">_plural</code>）</td>\n<td>完整 ICU 复数（<code class=\"language-text\">one/few/many</code>）</td>\n</tr>\n<tr>\n<td><strong>性别/选择语法</strong></td>\n<td>不支持</td>\n<td>支持 <code class=\"language-text\">{gender, select, ...}</code></td>\n</tr>\n<tr>\n<td><strong>日期/数字格式化</strong></td>\n<td>需手动处理</td>\n<td>内置 <code class=\"language-text\">{date, date, short}</code></td>\n</tr>\n<tr>\n<td><strong>灵活性</strong></td>\n<td>简单场景</td>\n<td>复杂国际化需求</td>\n</tr>\n</tbody>\n</table>","fields":{"slug":"/post/2024/国际化项目中  ICU 是什么/"},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#icu-%E7%9A%84%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD\"><strong>ICU 的核心功能</strong></a></p>\n<ul>\n<li><a href=\"#1-%E6%96%87%E6%9C%AC%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%B8%8E%E8%A7%A3%E6%9E%90\"><strong>1. 文本格式化与解析</strong></a></li>\n<li><a href=\"#2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83%E4%B8%8E%E6%8E%92%E5%BA%8F%E6%8E%92%E5%BA%8F%E8%A7%84%E5%88%99\"><strong>2. 字符串比较与排序（排序规则）</strong></a></li>\n<li><a href=\"#3-%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E8%BD%AC%E6%8D%A2\"><strong>3. 字符编码转换</strong></a></li>\n<li><a href=\"#4-%E5%A4%8D%E6%95%B0%E8%A7%84%E5%88%99plural-rules\"><strong>4. 复数规则（Plural Rules）</strong></a></li>\n<li><a href=\"#5-%E6%80%A7%E5%88%AB%E6%95%8F%E6%84%9F%E6%96%87%E6%9C%ACgender-aware-formatting\"><strong>5. 性别敏感文本（Gender-aware Formatting）</strong></a></li>\n<li><a href=\"#6-%E6%96%AD%E8%A1%8Cline-breaking%E5%92%8C%E6%96%87%E6%9C%AC%E8%BE%B9%E7%95%8C%E6%A3%80%E6%B5%8B\"><strong>6. 断行（Line Breaking）和文本边界检测</strong></a></li>\n<li><a href=\"#7-%E6%97%B6%E5%8C%BA%E5%92%8C%E5%9B%BD%E9%99%85%E5%8C%96%E6%97%A5%E5%8E%86\"><strong>7. 时区和国际化日历</strong></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E5%89%8D%E7%AB%AFweb%E7%9A%84-icu-%E5%AE%9E%E7%8E%B0\"><strong>前端（Web）的 ICU 实现</strong></a></p>\n<ul>\n<li><a href=\"#-i18next--%E6%8F%92%E4%BB%B6\">** i18next + 插件**</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E4%B8%8E%E6%99%AE%E9%80%9A-i18next-%E7%9A%84%E5%8C%BA%E5%88%AB\"><strong>与普通 i18next 的区别</strong></a></p>\n</li>\n</ul>","frontmatter":{"title":"国际化项目中  ICU 是什么","date":"2024年12月06日","description":null,"tags":["国际化"]},"wordCount":{"words":153,"paragraphs":31,"sentences":34}}},"pageContext":{"slug":"/post/2024/国际化项目中  ICU 是什么/","previous":{"fields":{"slug":"/post/2024/i18n要素/"},"frontmatter":{"title":"i18n要素","tags":["国际化"],"description":null}},"next":{"fields":{"slug":"/post/2024/国际化（i18n）和本地化（l10n）区别与联系/"},"frontmatter":{"title":"国际化（i18n）和本地化（l10n）区别与联系","tags":["国际化"],"description":null}}}},"staticQueryHashes":["2887002447","3110208747","3255319198","63159454"],"slicesMap":{}}